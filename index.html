<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Saikuro : A Cyclomatic Complexity Analyzer</title>
  <link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>
  <div id="header">
    <h1>Saikuro</h1>
    <h2>A Cyclomatic Complexity Analyzer</h2>
  </div>

  <div id="main">
    <div id="download">
      <h1>
	<a href="http://rubyforge.org/projects/saikuro/">Download Saikuro</a>
      </h1>
    </div>

    <p class="description">
      Saikuro is a Ruby cyclomatic complexity analyzer.  When given Ruby
      source code Saikuro will generate a report listing the cyclomatic
      complexity of each method found.  In addition, Saikuro counts the
      number of lines per method and can generate a listing of the number of
      tokens on each line of code.
    </p>

    <div class="section">
      <h1>Version:</h1>
      <p>0.2</p>
    </div>

    <div class="section">
      <h1><a name="license">License</a></h1>
      <p>Saikuro uses the BSD license.</p>
    </div>

<div class="section">
  <h1>Example Output</h1>
  <p>
    Here are examples of the output generated by Saikuro.
    <ul>
      <li>
	<a href="examples/tests/index_cyclo.html">Cyclomatic complexity summary page</a>
      </li>
      <li>
	<a href="examples/tests/index_token.html">Token count summary page</a>
      </li>
    </ul>
    </p>
</div>

<div class="section">
  <h1><a name="install">Installation</a></h1>
  <h2>As root run:</h2>
  <code># ruby setup.rb all</code></p>
</div>

<div class="section">
  <h1><a name="usage">Usage</a></h1>
  <p>Saikuro is a command line program.
    Running "saikuro.rb -h" will output a usage statement describing all
    the various arguments you can pass to it.</p>

  <code>"saikuro -c -p tests/samples.rb"</code>

  <p>The above command is a simple example that generates a cyclomatic
    complexity report on the samples.rb file, using the default filter,
    warning and error settings. The report is saved in the current
    directory.</p>
  <p>A more detailed example is :</p>
  <code>
    "saikuro -c -t -i tests -y 0 -w 11 -e 16 -o out/"
  </code>
  <p>
    This will analyze all Ruby files found in the "tests/"
    directory.  Saikuro will generate a token count report and a
    cyclomatic complexity report in the "out" directory .  The "-y 0"
    command will turn off filtering and thus show the complexity of all
    methods.  The "-w 11" will mark all methods with a complexity of 11 or
    higher with a warning.  Finally, "-e 16" will flag all methods with a
    complexity of 16 or higher with an error.
  </p>
</div>

<div class="section">
  <h1>About Cyclomatic Complexity</h1>
  <p>
    The following document provides a very good and detailed description
    by the author of cyclomatic complexity.
  </p>

  <p>
    NIST Special Publication 500-235 <br/>
    Structured Testing: A Testing Methodology Using the Cyclomatic
    Complexity Metric <br/>
    By Arthur H. Watson and Thomas J. McCabe <br/>
    <a href="http://hissa.nist.gov/HHRFdata/Artifacts/ITLdoc/235/title.htm">HTML</a>
    <br/>
    <a href="http://www.mccabe.com/iq_research_nist.htm">PDF</a>
  </p>
</div>

<div class="section">
  <h1>How and what Saikuro counts to calculate the cyclomatic complexity</h1>

  <p>
    Saikuro uses the Simplified Complexity Calculation, which is just
    adding up the number of branch points in a method.
  </p>

  <p>
    Each method starts with a complexity of 1, because there is at least
    one path through the code.  Then each conditional or looping operator
    (if, unless, while, until, for, elsif, when) adds one point to the
    complexity. Each "when" in a case statement adds one point.  Also each
    "rescue" statement adds one.
  </p>
  <p>
    Saikuro also regards blocks as an addition to a method's complexity
    because in many cases a block does add a path that may be traversed.
    For example, invoking the "each" method of an array with a block would
    only traverse the give block if the array is not empty.  Thus if you
    want to find the basis set to get 100% coverage of your code then a
    block should add one point to the method's complexity.  It is not yet
    for sure however to what level the accuracy is decreased through this
    measurement, as normal Ruby code uses blocks quite heavily and new
    paths are not necessarily introduced by every block.
  </p>
  <p>
    In addition, the short-circuiting "and" operators (&& and "and")
    currently do not contribute to a method's complexity, although
    McCabe's paper listed above suggests doing so.
  </p>
  <pre>
    #Example for "and" operator handling:

    # Starting values for case 1 and 2
    x = false
    y = 15
    r, q = nil

    # case 1
    puts "W" if ((r = x) && (q = y))
    puts r # => false
    puts q # => nil

    # case 2
    puts "W" if ((q = y) && (r = x))
    puts r # => false
    puts q # => 15
  </pre>
  <p>
    Case 1 illustrates why "and" operators should add to a method's
    complexity, because the result of ( r = x ) is false the if statement
    stops and returns false without evaluating the ( q = y ) branch.  Thus
    if a total coverage of source code is desired, one point should be
    added to the method's complexity.
  </p>
  <p>
    So why is it not added?
    Mainly, because we have not gotten around to it.  We are wondering if
    this would increase the noise more than it should.
  </p>
</div>

<div class="section">
  <h1>Tests</h1>
  <p>
    In the test directory is a sample file that has examples of the
    various possible cases that we examined and documented the expected
    cyclomatic complexity result.  If you find mistakes or missing tests
    please report them.
  </p>
</div>

<div class="section">
  <h1><a name="authors">Credits</a></h1>
  <p>Saikuro is written by Zev Blut.<br/>
    Contact information can be found in the source header or ReadMe.txt file.<br/>
    A special thanks to Elbert Corpuz for writing the CSS for the HTML
    output for Saikuro and this homepage.
  </p>
  <p>
   Finally, thanks to <a href="http://ubit.com">Ubit</a> for allowing this software
   to go open source.
  </p>
</div>

<div class="section">
  <h1>Other metric tools for Ruby</h1>
  <p>If you are interested in metrics here are a few other tools for Ruby.</p>

  <p>Ryan Davis has an abc metric program as an example in his ParseTree
    product:  <a href="http://www.zenspider.com/ZSS/Products/ParseTree/">ParseTree</a>
  <p>
  <p>
    The PMD project has a tool called CPD that can scan Ruby source code
    looking for source duplication:  <a href="http://pmd.sourceforge.net/"> PMD</a>
  </p>
</div>
</div>
  <ul id="nav">
    <li><a href="#license">License</a></li>
    <li><a href="#usage">Usage</a></li>
    <li><a href="#install">Install</a></li>
    <li><a href="#authors">Authors</a></li>
  </ul>
  <div id="footer"></div>
</body>
</html>
